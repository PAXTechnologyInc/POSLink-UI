
def loadVersions(String propertiesFile) {
    println("rootProject is " + rootProject.name)

    Properties properties = new Properties()
    def file = file(propertiesFile)
    if (file.canRead()) {
        properties.load(file.newDataInputStream())
    } else {
        throw new RuntimeException("Cannot find " + propertiesFile)
    }
    ext._moduleVersion = properties.getProperty("_moduleVersion")
    ext._compileSdkVersion = properties.getProperty("_compileSdkVersion")
    ext._minSdkVersion = properties.getProperty("_minSdkVersion")
    ext._targetSdkVersion = properties.getProperty("_targetSdkVersion")
    ext._androidModuleVersionCode = properties.getProperty("_androidModuleVersionCode")
    ext._supportLibraryVersion = properties.getProperty("_supportLibraryVersion")

    ext._mavenName = properties.getProperty("_mavenName")
    ext._publishingUrl = properties.getProperty("_publishingUrl")
    ext._groupId = properties.getProperty("_groupId")
    def isRelease = System.getProperty('isRelease', 'false')
    if (isRelease != 'true') {
        ext.GLOBAL_VERSION = "${ext._moduleVersion}-SNAPSHOT"
    } else {
        ext.GLOBAL_VERSION = ext._moduleVersion
    }
}

ext {
    loadVersions = this.&loadVersions
}
