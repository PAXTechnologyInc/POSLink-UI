

def loadVersions(String propertiesFile) {
    println("rootProject is " + rootProject.name)

    Properties properties = new Properties()
    def file = file(propertiesFile)
    if (file.canRead()) {
        properties.load(file.newDataInputStream())
    } else {
        throw new RuntimeException("Cannot find " + propertiesFile)
    }
    properties.each { prop -> project.ext.set(prop.key, prop.value) }
    
    def isRelease = System.getProperty('isRelease', 'false')
    if (isRelease != 'true') {
        ext.GLOBAL_VERSION = "${project.ext._moduleVersion}-SNAPSHOT"
    } else {
        ext.GLOBAL_VERSION = project.ext._moduleVersion
    }
}

ext {
    loadVersions = this.&loadVersions
}
